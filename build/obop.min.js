/*! obop 0.0.3 */
!function(a){if("function"==typeof bootstrap)bootstrap("obop",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeObop=a}else"undefined"!=typeof window?window.obop=a():global.obop=a()}(function(){return function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b){function c(a){return this instanceof c?(this.settings=a||{},void 0):new c(a)}function d(){return this instanceof d?void 0:new d}d.prototype=a("./lib/system.json"),c.where=c.prototype.where=a("./lib/where.js").where,c.view=c.prototype.view=a("./lib/view.js").view,c.order=c.prototype.order=a("./lib/order.js").order,c.update=c.prototype.update=a("./lib/update.js").update,c.system=c.prototype.system=new d,c.settings=c.prototype.settings={},b.exports=c},{"./lib/system.json":2,"./lib/where.js":3,"./lib/view.js":4,"./lib/order.js":5,"./lib/update.js":6}],2:[function(a,b){b.exports={name:"obop",version:"0.0.3",update:{$set:1,$unset:1,$rename:1,$push:1,$pull:1,$inc:1}}},{}],3:[function(a,b,c){function d(){return!0}c.where=function(b){if("function"==typeof b)return b;b=b||{};var c=this||a("../index"),e=c.settings||{},f=e.nop?d:null;if("object"!=typeof b){var g=new Error("Invalid update operator type: "+b);if(e.throwError)throw g;return g}var h=Object.keys(b);if(!h.length)return f;if(1==h.length){var i=h[0],j=b[i];if("object"!=typeof j)return function(a){return a[i]==j}}return function(a){for(var c in b)if(a[c]!=b[c])return!1;return!0}}},{"../index":1}],4:[function(a,b,c){function d(a){return a}c.view=function(b){if("function"==typeof b)return b;b=b||{};var c=this||a("../index"),e=c.settings||{},f=e.nop?d:null;if("object"!=typeof b){var g=new Error("Invalid update operator type: "+b);if(e.throwError)throw g;return g}var h=Object.keys(b);if(!h.length)return f;if(1==h.length){var i=h[0];if(b[i])return function(a){var b={};return b[i]=a[i],b}}var j,k={};for(var l in b)b[l]?j=!0:k[l]=!0;return j?function(a){var c={};for(var d in b)b[d]&&(c[d]=a[d]);return c}:function(a){var b={};for(var c in a)k[c]||(b[c]=a[c]);return b}}},{"../index":1}],5:[function(a,b,c){function d(){return 0}c.order=function(b){if("function"==typeof b)return b;b=b||{};var c=this||a("../index"),e=c.settings||{},f=e.nop?d:null;if("object"!=typeof b){var g=new Error("Invalid order operator type: "+b);if(e.throwError)throw g;return g}var h=Object.keys(b);if(!h.length)return f;if(1==h.length){var i=h[0];if(h[i]){var j=b[i];return function(a,b){return a[i]<b[i]?-j:a[i]>b[i]?j:0}}}return function(a,c){for(var d in b){if(a[d]<c[d])return-b[d];if(a[d]>c[d])return b[d]}}}},{"../index":1}],6:[function(a,b,c){function d(a){return a}c.update=function(b){var c;if("function"==typeof b)return b;b=b||{};var e=this||a("../index"),f=e.settings||{},g=f.nop?d:null;if(!Object.keys(b))return g;if("object"!=typeof b){if(c=new Error("Invalid update operator type: "+b),f.throwError)throw c;return c}var h=e.system.update;for(var i in b)if(!h[i]||"object"!=typeof b[i]){if(c=new Error("Unknown update operator parameter: "+i),f.throwError)throw c;return c}return function(a){var c,d,e;if(!a)return a;if(b.$set)for(c in b.$set)a[c]=b.$set[c];if(b.$unset)for(c in b.$unset)delete a[c];if(b.$rename)for(c in b.$rename)d=b.$rename[c],a[d]=a[c],delete a[c];if(b.$push)for(c in b.$push)e=a[c],e instanceof Array||(a[c]="undefined"==typeof e?[]:[e]),d=b.$push[c],a[c].push(d);if(b.$pull)for(c in b.$pull)if(d=b.$pull[c],e=a[c],e instanceof Array){for(var f=[],g=e.length,h=0;g>h;h++){var i=e[h];d!=i&&f.push(i)}a[c]=f}else d==e&&(a[c]=[]);if(b.$inc)for(c in b.$inc)d=b.$inc[c],e=a[c],d=parseFloat(d)||0,e=parseFloat(e)||0,a[c]=e+d;return a}}},{"../index":1}]},{},[1])(1)});